<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <title>Login | Postify</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <style>
        @keyframes fadeInUp { 0% { opacity: 0; transform: translateY(12px);} 100% { opacity: 1; transform: translateY(0);} }
        @keyframes slideIn { 0% { opacity: 0; transform: translateX(-12px);} 100% { opacity: 1; transform: translateX(0);} }
        .animate-fadeInUp { animation: fadeInUp .6s ease-out both; }
        .animate-slideIn { animation: slideIn .7s ease-out both; }
    </style>
    </head>
<body class="min-h-screen bg-gradient-to-br from-gray-900 via-blue-950 to-blue-900 text-white flex items-center justify-center p-4">
    <div class="w-full max-w-5xl grid md:grid-cols-2 bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl overflow-hidden shadow-2xl">
        <!-- Left visual panel -->
        <div class="relative hidden md:block">
            <img alt="Welcome to Postify" class="absolute inset-0 w-full h-full object-cover"
                 src="https://images.unsplash.com/photo-1515879218367-8466d910aaa4?q=80&w=1200&auto=format&fit=crop"/>
            <div class="absolute inset-0 bg-gradient-to-tr from-black/60 to-blue-900/40"></div>
            <div class="relative h-full p-10 flex flex-col justify-end gap-2 animate-slideIn">
                <h2 class="text-3xl md:text-4xl font-extrabold text-blue-300 drop-shadow">Welcome Back</h2>
                <p class="text-blue-100/90">Sign in to continue learning, sharing, and growing with the community.</p>
            </div>
        </div>

        <!-- Right form panel -->
        <div class="p-8 md:p-10">
            <form action="/login" method="post" class="space-y-4 animate-fadeInUp">
                <h1 class="text-3xl font-bold">Login</h1>
                <p class="text-gray-300">New here? <a href="/register" class="text-blue-400 hover:text-blue-300 underline">Create an account</a></p>

                <h2 class="text-sm font-semibold text-red-400" id="errorMsg">Invalid username or password</h2>
                <script>
                    const urlParams = new URLSearchParams(window.location.search);
                    if (urlParams.get('error') === 'true') {
                        const errorMsg = document.getElementById('errorMsg');
                        errorMsg.classList.remove('hidden');
                        setTimeout(() => errorMsg.classList.add('hidden'), 3000);
                    } else {
                        document.getElementById('errorMsg').classList.add('hidden');
                    }
                </script>

                <div>
                    <label for="username" class="block text-sm mb-1">Username</label>
                    <input type="text" name="username" id="username" placeholder="Username" class="w-full p-3 rounded-lg bg-gray-800/80 border border-white/10 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" required autofocus oninvalid="this.setCustomValidity('Please enter a username.')" oninput="this.setCustomValidity('')">
                </div>

                <div class="relative">
                    <label for="password" class="block text-sm mb-1">Password</label>
                    <input type="password" name="password" id="password" placeholder="Password" class="w-full p-3 pr-10 rounded-lg bg-gray-800/80 border border-white/10 text-white focus:outline-none focus:ring-2 focus:ring-blue-500" required oninvalid="this.setCustomValidity('Please enter a password.')" oninput="this.setCustomValidity('')">
                    <button type="button" id="togglePasswordLogin" aria-label="Show password" class="absolute bottom-3.5 right-3 text-gray-300 hover:text-white cursor-pointer">
                        <svg class="eye h-5 w-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M1.5 12s3.75-7.5 10.5-7.5S22.5 12 22.5 12 18.75 19.5 12 19.5 1.5 12 1.5 12z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                        <svg class="eye-off h-5 w-5 hidden" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M3 3l18 18M10.584 10.59a3 3 0 104.827 3.41M9.88 4.84A10.451 10.451 0 0112 4.5c6.75 0 10.5 7.5 10.5 7.5a18.97 18.97 0 01-4.438 5.513M6.228 6.228A18.968 18.968 0 001.5 12s3.75 7.5 10.5 7.5a10.45 10.45 0 004.007-.773"></path></svg>
                    </button>
                </div>

                <button type="submit" class="w-full py-3 bg-blue-600 hover:bg-blue-700 rounded-xl shadow-lg hover:shadow-blue-500/30 transition-colors font-semibold">Sign In</button>

                <div class="text-center">
                    <a href="/forgot-password" class="text-sm underline text-blue-200 hover:text-blue-100">Forgot Password?</a>
                </div>
            </form>
        </div>
    </div>

    <script>
        function toggleVisibility(input, btn){
            const isHidden = input.type === 'password';
            input.type = isHidden ? 'text' : 'password';
            btn.setAttribute('aria-label', isHidden ? 'Hide password' : 'Show password');
            const eye = btn.querySelector('.eye');
            const eyeOff = btn.querySelector('.eye-off');
            if (eye && eyeOff) { eye.classList.toggle('hidden'); eyeOff.classList.toggle('hidden'); }
        }
        const toggleBtnLogin = document.getElementById('togglePasswordLogin');
        const passwordInputLogin = document.getElementById('password');
        if (toggleBtnLogin && passwordInputLogin) {
            toggleBtnLogin.addEventListener('click', () => toggleVisibility(passwordInputLogin, toggleBtnLogin));
        }
    </script>
    <script src="/javascript/myScripts.js"></script>
</body>
</html>